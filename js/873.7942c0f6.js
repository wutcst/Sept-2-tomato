"use strict";(self["webpackChunkwebwork"]=self["webpackChunkwebwork"]||[]).push([[873],{36857:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var a=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"home-container"},[t("el-container",[t("el-main",{staticClass:"main-content"},[t("main-content",{attrs:{currentRoomId:e.currentRoomId}}),t("div",{staticClass:"main-chat"},[t("main-chat")],1),t("div",{staticClass:"button-container"},[t("el-button",{staticClass:"exit",on:{click:function(t){e.showExitDialog=!0}}},[e._v("退出游戏")]),t("el-button",{staticClass:"back",on:{click:function(t){return e.move("back")}}},[e._v("返回")])],1),t("div",{staticClass:"dialog-container"},[t("div",{staticClass:"dialog"},[t("div",{staticClass:"dialog-content"},[t("img",{attrs:{width:"100px",src:o(81810),alt:""}}),t("div",{staticClass:"text-display"},[t("p",[e._v(e._s(e.displayedText))])])]),t("div",{staticClass:"controls"},[t("div",{staticClass:"row"},[t("el-button",{staticClass:"north",on:{click:function(t){return e.move("north")}}},[e._v("北")])],1),t("div",{staticClass:"row"},[t("el-button",{staticClass:"west",on:{click:function(t){return e.move("west")}}},[e._v("西")]),t("el-button",{staticClass:"stay",on:{click:function(t){return e.move("stay")}}},[e._v("S")]),t("el-button",{staticClass:"east",on:{click:function(t){return e.move("east")}}},[e._v("东")])],1),t("div",{staticClass:"row"},[t("el-button",{staticClass:"south",on:{click:function(t){return e.move("south")}}},[e._v("南")])],1)])])])],1),t("el-aside",{staticClass:"sidebar-container",attrs:{width:"300px"}},[t("app-sidebar"),t("img",{attrs:{src:o(26263),alt:""}}),t("h2",{staticClass:"location"},[t("span",[e._v(e._s(e.locationMap[e.currentRoomId]))])])],1)],1),t("el-dialog",{attrs:{title:"确认退出",visible:e.showExitDialog,width:"30%"},on:{"update:visible":function(t){e.showExitDialog=t},close:function(t){e.showExitDialog=!1}}},[t("span",[e._v("您确定要退出游戏吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showExitDialog=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmExit}},[e._v("确认")])],1)])],1)},n=[],i=o(47546),s=o(24634),c=(o(52675),o(89463),o(28706),o(44114),o(76031),o(62010),function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content",style:{backgroundImage:"url(".concat(e.currentLocation.backgroundImage,")")}},[t("div",{staticClass:"map"},[e.currentLocation.items.length>0?t("div",{staticClass:"items"},e._l(e.currentLocation.items,(function(o,a){return t("div",{key:o.id+"-"+a,staticClass:"item",on:{mouseenter:function(t){return e.showTooltip(a)},mouseleave:e.hideTooltip}},[t("img",{attrs:{src:o.imageId,alt:o.name}}),t("p",[e._v(e._s(o.name))]),e.tooltipIndex!==a||e.takingItem?e._e():t("div",{staticClass:"tooltip"},[t("p",[e._v("名称: "+e._s(o.name))]),t("p",[e._v("描述: "+e._s(o.description))]),t("p",[e._v("重量: "+e._s(o.weight))]),t("p",[e._v("物品类型： "+e._s(1===o.isMagic?"魔法物品":2===o.isMagic?"永久物品":"一次性物品")+" ")]),t("button",{on:{click:function(t){return t.stopPropagation(),e.takeItem(a)}}},[e._v("拿取")])])])})),0):t("div",[t("p",[e._v("当前位置没有可获取的物品。")])])])])}),r=[],l=(o(62062),o(54554),o(2892),o(25782));const m=o.p+"img/map.008bfdcd.jpg",d=o.p+"img/banana.abea13cd.jpg",g=o.p+"img/cookie.5ed19c8b.jpg",u=o.p+"img/meat.7427ac24.jpg",f=o.p+"img/shit.40edacfa.png",p=o.p+"img/zooGate.4ecdaf6f.jpg",h=o.p+"img/monkeyZone.e09491d6.jpg",b=o.p+"img/lionZone.9a82d940.jpg",v=o.p+"img/elephantZone.5d8c6aab.jpg",I=o.p+"img/panadaZone.e34fe7c1.jpg",y=o.p+"img/export.a87df8f1.jpg",k={props:{currentRoomId:{type:Number,required:!0}},data:function(){return{locationMap:{1:{name:"入口",backgroundImage:p,items:[]},2:{name:"猴子园区",backgroundImage:h,items:[]},3:{name:"狮子园区",backgroundImage:b,items:[]},4:{name:"大象园区",backgroundImage:v,items:[]},5:{name:"熊猫园区",backgroundImage:I,items:[]},6:{name:"出口",backgroundImage:y,items:[]}},itemMap:{1:{id:1,name:"地图",imageId:m,color:"#ffcc99",borderColor:"#cc9966"},2:{id:2,name:"香蕉",imageId:d,color:"#ffcc99",borderColor:"#cc9966"},3:{id:3,name:"魔法饼干",imageId:g,color:"#ffcc99",borderColor:"#cc9966"},4:{id:4,name:"生肉",imageId:u,color:"#ffcc99",borderColor:"#cc9966"},5:{id:5,name:"大便",imageId:f,color:"#ffcc99",borderColor:"#cc9966"}},tooltipIndex:null,takingItem:!1}},computed:{currentLocation:function(){return this.locationMap[this.currentRoomId]||this.locationMap[1]}},watch:{currentRoomId:{handler:function(e){this.updateLocation(e)},immediate:!0}},created:function(){this.listenDropItem(),this.listenUpdateItem()},methods:{listenDropItem:function(){var e=this;this.$root.$on("drop-item",(function(){e.updateLocation(e.currentRoomId)}))},listenUpdateItem:function(){var e=this;this.$root.$on("update-item",(function(){e.updateLocation(e.currentRoomId)}))},updateLocation:function(e){var t=this,o=localStorage.getItem("token");l.A.post("http://10.78.250.34:8081/room/check",{roomID:e},{headers:{token:o}}).then((function(o){var a=o.data;if(200===a.code&&a.data){var n=a.data.map((function(e){return{id:e.itemID,name:e.itemName,description:e.description,isMagic:e.isMagic,weight:e.weight,imageId:t.itemMap[e.itemID].imageId}}));t.$set(t.locationMap[e],"items",n)}else console.error("获取物品列表失败:",a.message)}))["catch"]((function(e){console.error("获取物品列表出错:",e)}))},showTooltip:function(e){this.tooltipIndex=e},hideTooltip:function(){this.tooltipIndex=null},takeItem:function(e){var t=this,o=this.currentLocation.items[e],a=localStorage.getItem("token"),n=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/item/take",{itemID:o.id,playerName:n},{headers:{token:a}}).then((function(a){var n=a.data;200===n.code?(localStorage.setItem("message","你成功拿取".concat(o.name)),t.currentLocation.items.splice(e,1),t.$root.$emit("take-item")):(localStorage.setItem("message","拿取物品失败,你的负重剩余量不足"),t.$root.$emit("take-item"),console.error("拿取物品失败,你的负重剩余量不足:",n.message))}))["catch"]((function(e){console.error("拿取物品出错:",e)}))}}},N=k;var x=o(81656),C=(0,x.A)(N,c,r,!1,null,"61a72a34",null);const _=C.exports;var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebar"},[t("p",[e._v("当前负重: "+e._s(e.usedWeight)+"/"+e._s(e.totalWeight))]),t("div",{staticClass:"inventory"},[e._l(e.displayedInventory,(function(o,a){return t("div",{key:o.itemID+"-"+a,staticClass:"item",style:{backgroundColor:o.color,border:"1px solid "+o.borderColor},on:{mouseenter:function(t){return e.showTooltip(a)},mouseleave:e.hideTooltip,click:function(t){return t.stopPropagation(),e.toggleDropConfirmation(a)}}},[t("img",{attrs:{src:o.imageId,alt:o.name}}),e.tooltipIndex!==a||e.confirmingDrop?e._e():t("div",{staticClass:"tooltip"},[t("p",[e._v("名称: "+e._s(o.itemName))]),t("p",[e._v("描述: "+e._s(o.description))]),t("p",[e._v("重量: "+e._s(o.weight))]),t("p",[e._v("类型： "+e._s(1===o.isMagic?"魔法物品":2===o.isMagic?"永久物品":"一次性物品")+" ")]),t("button",{on:{click:function(t){return t.stopPropagation(),e.dropItem(a)}}},[e._v("放下")]),t("button",{on:{click:function(t){return t.stopPropagation(),e.useItem(a)}}},[e._v("使用")]),t("button",{on:{click:function(t){return t.stopPropagation(),e.feedItem(a)}}},[e._v("投喂")])])])})),e._l(e.emptySlots,(function(e){return t("div",{key:"empty-"+e,staticClass:"item empty"})}))],2),t("MapLayer",{attrs:{visible:e.isMapLayerVisible},on:{close:function(t){e.isMapLayerVisible=!1}}})],1)},D=[],T=o(40668),M=(o(72712),o(34782),o(26099),function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"map-layer"},[t("button",{on:{click:e.closeMapLayer}},[e._v("关闭")]),t("img",{attrs:{src:o(1061),alt:"地图"}})]):e._e()}),S=[];const A={props:{visible:{type:Boolean,required:!0}},methods:{closeMapLayer:function(){this.$emit("close")}}},$=A;var P=(0,x.A)($,M,S,!1,null,"6ec8ea99",null);const j=P.exports,L={name:"AppSidebar",components:{MapLayer:j},data:function(){return{totalWeight:100,usedWeight:0,inventory:[],items:{地图:{itemName:"地图",imageId:m,color:"#ffcc99",borderColor:"#cc9966"},香蕉:{itemName:"香蕉",imageId:d,color:"#ffcc99",borderColor:"#cc9966"},魔法饼干:{itemName:"魔法饼干",imageId:g,color:"#ffcc99",borderColor:"#cc9966"},生肉:{itemName:"生肉",imageId:u,color:"#ffcc99",borderColor:"#cc9966"},大便:{itemName:"大便",imageId:f,color:"#ffcc99",borderColor:"#cc9966"}},maxDisplayItems:9,tooltipIndex:null,confirmingDrop:!1,itemToDropIndex:null,isMapLayerVisible:!1}},computed:{displayedInventory:function(){var e=this;return this.inventory.slice(0,this.maxDisplayItems).map((function(t){return(0,T.A)((0,T.A)({},e.items[t.itemName]),t)}))},emptySlots:function(){return Math.max(0,this.maxDisplayItems-this.displayedInventory.length)}},created:function(){this.listenTakeItem(),this.listenUpdateItem()},methods:{listenTakeItem:function(){var e=this;this.$root.$on("take-item",(function(){e.fetchPlayerInfo(),e.fetchInventoryItems()}))},listenUpdateItem:function(){var e=this;this.$root.$on("update-item",(function(){e.fetchPlayerInfo(),e.fetchInventoryItems()}))},showTooltip:function(e){this.tooltipIndex=e},hideTooltip:function(){this.tooltipIndex=null},toggleDropConfirmation:function(e){this.confirmingDrop=!this.confirmingDrop,this.itemToDropIndex=e},dropItem:function(e){var t=this,o=this.inventory[e],a=localStorage.getItem("token"),n=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/item/drop",{itemID:o.itemID,playerName:n},{headers:{token:a}}).then((function(e){200===e.data.code?(localStorage.setItem("message","成功放下物品：".concat(o.itemName)),t.fetchPlayerInfo(),t.fetchInventoryItems(),t.$root.$emit("drop-item")):console.error("放下物品失败:",e.data.message)}))["catch"]((function(e){console.error("放下物品出错:",e)}))["finally"]((function(){t.confirmingDrop=!1,t.itemToDropIndex=null}))},useItem:function(e){var t=this,o=this.inventory[e];if("地图"===o.itemName)this.isMapLayerVisible=!0;else{var a=localStorage.getItem("token"),n=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/item/use",{itemID:o.itemID,playerName:n},{headers:{token:a}}).then((function(e){200===e.data.code?(t.fetchPlayerInfo(),t.fetchInventoryItems(),localStorage.setItem("message",e.data.message),t.$root.$emit("use-item")):console.error("使用物品失败:",e.data.message)}))["catch"]((function(e){console.error("使用物品出错:",e)}))}},feedItem:function(e){var t=this,o=this.inventory[e],a=localStorage.getItem("token"),n=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/item/feed",{itemID:o.itemID,playerName:n},{headers:{token:a}}).then((function(e){var o=e.data;200===o.code?(t.fetchPlayerInfo(),t.fetchInventoryItems(),localStorage.setItem("message",o.message),t.$root.$emit("feed-item")):console.error("投喂物品失败:",o.message)}))["catch"]((function(e){console.error("投喂物品出错:",e)}))},fetchPlayerInfo:function(){var e=this,t=localStorage.getItem("token"),o=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/player/getPlayerInfo",{playerName:o},{headers:{token:t}}).then((function(t){if(200===t.data.code){var o=t.data.data;e.usedWeight=o.currentWeight,e.totalWeight=o.maxCarryWeight}else console.error("获取玩家信息失败:",t.data.message)}))["catch"]((function(e){console.error("获取玩家信息出错:",e)}))},fetchInventoryItems:function(){var e=this,t=localStorage.getItem("token"),o=localStorage.getItem("playerName");l.A.post("http://10.78.250.34:8081/item/getItems",{playerName:o},{headers:{token:t}}).then((function(t){200===t.data.code?(e.inventory=t.data.data,e.usedWeight=e.inventory.reduce((function(e,t){return e+t.weight}),0)):console.error("获取背包物品失败:",t.data.message)}))["catch"]((function(e){console.error("获取背包物品出错:",e)}))},selectItem:function(e){console.log("选中了物品：",this.inventory[e])}},mounted:function(){this.fetchPlayerInfo(),this.fetchInventoryItems()}},U=L;var R=(0,x.A)(U,w,D,!1,null,"1d1af044",null);const E=R.exports;o(25276);var W=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{staticClass:"font",on:{click:e.openChat}},[e._v("打开聊天")]),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"聊天室",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"chat-container"},[t("div",{staticClass:"chat-header"},[t("p",[e._v("当前在线人数: "+e._s(e.onlineUsers))])]),t("div",{staticClass:"chat-content"},e._l(e.messages,(function(o){return t("div",{key:o.id,staticClass:"chat-message"},[t("span",[t("strong",[e._v(e._s(o.user)+":")]),e._v(" "+e._s(o.text))])])})),0),t("div",{staticClass:"chat-footer"},[t("el-button",{staticClass:"emoji",on:{click:e.openEmojiPicker}},[e._v("😀")]),t("el-input",{attrs:{placeholder:"输入消息..."},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)}},model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}}),t("el-button",{on:{click:e.sendMessage}},[e._v("发送")])],1)])]),t("el-dialog",{attrs:{visible:e.emojiDialogVisible,title:"选择表情",width:"70%"},on:{"update:visible":function(t){e.emojiDialogVisible=t}}},[t("div",{staticClass:"emoji-container"},e._l(e.emojiArr,(function(o){return t("span",{key:o.className,on:{click:function(t){return e.selectEmoji(o.icon)}}},[e._v(" "+e._s(o.icon)+" ")])})),0)])],1)},V=[],Z=(o(60739),o(33110),o(79432),o(42762),[{className:"bg-1f604",icon:"😄"},{className:"bg-1f603",icon:"😃"},{className:"bg-1f600",icon:"😀"},{className:"bg-1f60a",icon:"😊"},{className:"bg-1f609",icon:"😉"},{className:"bg-1f60d",icon:"😍"},{className:"bg-1f618",icon:"😘"},{className:"bg-1f61a",icon:"😚"},{className:"bg-1f617",icon:"😗"},{className:"bg-1f619",icon:"😙"},{className:"bg-1f61c",icon:"😜"},{className:"bg-1f61d",icon:"😝"},{className:"bg-1f61b",icon:"😛"},{className:"bg-1f633",icon:"😳"},{className:"bg-1f601",icon:"😁"},{className:"bg-1f614",icon:"😔"},{className:"bg-1f60c",icon:"😌"},{className:"bg-1f612",icon:"😒"},{className:"bg-1f61e",icon:"😞"},{className:"bg-1f623",icon:"😣"},{className:"bg-1f622",icon:"😢"},{className:"bg-1f602",icon:"😂"},{className:"bg-1f62d",icon:"😭"},{className:"bg-1f62a",icon:"😪"},{className:"bg-1f625",icon:"😥"},{className:"bg-1f630",icon:"😰"},{className:"bg-1f605",icon:"😅"},{className:"bg-1f613",icon:"😓"},{className:"bg-1f629",icon:"😩"},{className:"bg-1f62b",icon:"😫"},{className:"bg-1f628",icon:"😨"},{className:"bg-1f631",icon:"😱"},{className:"bg-1f620",icon:"😠"},{className:"bg-1f621",icon:"😡"},{className:"bg-1f624",icon:"😤"},{className:"bg-1f616",icon:"😖"},{className:"bg-1f606",icon:"😆"},{className:"bg-1f60b",icon:"😋"},{className:"bg-1f637",icon:"😷"},{className:"bg-1f60e",icon:"😎"},{className:"bg-1f634",icon:"😴"},{className:"bg-1f635",icon:"😵"},{className:"bg-1f632",icon:"😲"},{className:"bg-1f61f",icon:"😟"},{className:"bg-1f626",icon:"😦"},{className:"bg-1f627",icon:"😧"},{className:"bg-1f608",icon:"😈"},{className:"bg-1f47f",icon:"👿"},{className:"bg-1f62e",icon:"😮"},{className:"bg-1f62c",icon:"😬"},{className:"bg-1f610",icon:"😐"},{className:"bg-1f615",icon:"😕"},{className:"bg-1f62f",icon:"😯"},{className:"bg-1f636",icon:"😶"},{className:"bg-1f607",icon:"😇"},{className:"bg-1f60f",icon:"😏"},{className:"bg-1f611",icon:"😑"},{className:"bg-1f63a",icon:"😺"},{className:"bg-1f638",icon:"😸"},{className:"bg-1f63b",icon:"😻"},{className:"bg-1f63d",icon:"😽"},{className:"bg-1f63c",icon:"😼"},{className:"bg-1f640",icon:"🙀"},{className:"bg-1f63f",icon:"😿"},{className:"bg-1f639",icon:"😹"},{className:"bg-1f63e",icon:"😾"},{className:"bg-1f479",icon:"👹"},{className:"bg-1f47a",icon:"👺"}]);const O={data:function(){return{dialogVisible:!1,emojiDialogVisible:!1,onlineUsers:"0",messages:[],newMessage:"",emojiArr:Z,ws:null}},created:function(){this.connectToWebSocket()},methods:{openChat:function(){this.dialogVisible=!0},openEmojiPicker:function(){this.emojiDialogVisible=!0},selectEmoji:function(e){this.newMessage+=e},connectToWebSocket:function(){var e=this;this.ws=new WebSocket("ws://10.78.250.34:8081/webSocket/"+localStorage.getItem("playerName")),this.ws.onopen=function(){console.log("WebSocket connected")},this.ws.onmessage=function(t){try{var o=JSON.parse(t.data);switch(o.type){case"update":e.$root.$emit("update-item");break;case"message":e.messages.push(o);break;case"onlineUsers":e.onlineUsers=o.text;break;default:console.log("Unknown message type:",o)}}catch(a){console.error("Error parsing JSON:",a)}},this.ws.onclose=function(){console.log("WebSocket closed"),e.onlineUsers="0"},this.ws.onerror=function(e){console.log("WebSocket error:",e)}},sendMessage:function(){""!==this.newMessage.trim()&&(this.sendMessageToServer({type:"message",text:this.newMessage,user:this.getPlayerName()}),this.newMessage="")},sendMessageToServer:function(e){this.ws.send(JSON.stringify(e))},getPlayerName:function(){return localStorage.getItem("playerName")||"未知用户"}},beforeDestroy:function(){this.ws&&this.ws.close()}},J=O;var q=(0,x.A)(J,W,V,!1,null,"f4de27ca",null);const z=q.exports,F={name:"home-main",components:{MainContent:_,AppSidebar:E,MainChat:z},data:function(){return{playerInfo:null,currentRoomId:1,dialogContent:"欢迎进入《勇闯动物园》!".concat(this.getPlayerName()),displayedText:"",displayTimeout:null,locationMap:{1:"入口",2:"猴子园区",3:"狮子园区",4:"大象园区",5:"熊猫园区",6:"出口"},visitedDirection:[],backDirection:"",showExitDialog:!1}},created:function(){this.displayedText="",this.startTextAnimation(),this.fetchUserInfo(),this.listenFeedItem(),this.listenUseItem(),this.listenTakeItem(),this.listenDropItem()},methods:{listenFeedItem:function(){var e=this;this.$root.$on("feed-item",(function(){e.dialogContent=e.getPlayMessage(),e.displayedText="",e.startTextAnimation(),e.fetchUserInfo()}))},listenUseItem:function(){var e=this;this.$root.$on("use-item",(function(){e.dialogContent=e.getPlayMessage(),e.displayedText="",e.startTextAnimation()}))},listenTakeItem:function(){var e=this;this.$root.$on("take-item",(function(){e.dialogContent=e.getPlayMessage(),e.displayedText="",e.startTextAnimation(),e.fetchUserInfo()}))},listenDropItem:function(){var e=this;this.$root.$on("drop-item",(function(){e.dialogContent=e.getPlayMessage(),e.displayedText="",e.startTextAnimation(),e.fetchUserInfo()}))},getPlayerName:function(){return localStorage.getItem("playerName")},getPlayToken:function(){return localStorage.getItem("token")},getPlayMessage:function(){return localStorage.getItem("message")},fetchUserInfo:function(){var e=this;return(0,s.A)((0,i.A)().mark((function t(){var o,a,n;return(0,i.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.getPlayerName(),a=e.getPlayToken(),o&&a){t.next=5;break}return console.error("本地存储中没有找到 playerName 或 token"),t.abrupt("return");case 5:return t.prev=5,t.next=8,l.A.post("http://10.78.250.34:8081/player/getPlayerInfo",{playerName:o},{headers:{token:a}});case 8:n=t.sent,200===n.data.code?(e.playerInfo=n.data.data,e.currentRoomId=e.playerInfo.currentRoomID):console.error("获取用户信息出错:",n.data.message),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),console.error("请求出错:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},move:function(e){var t=this;return(0,s.A)((0,i.A)().mark((function o(){var a,n,s,c,r,m,d,g,u,f;return(0,i.A)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.displayTimeout&&(clearTimeout(t.displayTimeout),t.displayTimeout=null,t.displayedText=t.dialogContent),a=t.getPlayerName(),n=t.getPlayToken(),s={east:0,south:1,west:2,north:3,stay:4,back:5},c={west:"east",north:"south",east:"west",south:"north"},r={1:"入口",2:"猴子园区",3:"狮子园区",4:"大象园区",5:"熊猫园区",6:"出口"},a&&n){o.next=9;break}return console.error("本地存储中没有找到 playerName 或 token"),o.abrupt("return");case 9:if(o.prev=9,"back"!==e){o.next=23;break}if(!(t.visitedDirection.length>0)){o.next=20;break}return m=t.visitedDirection.pop(),t.backDirection=c[m],o.next=16,l.A.post("http://10.78.250.34:8081/room/go",{playerName:a,direction:s[t.backDirection]},{headers:{token:n}});case 16:d=o.sent,200===d.data.code?(g=d.data.data,t.currentRoomId=g.roomID,t.dialogContent="你回到了".concat(g.roomName,"。 ").concat(g.description)):t.dialogContent="无法往".concat(t.getDirectionText(e),"走，你现在在").concat(r[t.currentRoomId],"。"),o.next=21;break;case 20:t.dialogContent="无法返回,你已经到了最初的地方。";case 21:o.next=27;break;case 23:return o.next=25,l.A.post("http://10.78.250.34:8081/room/go",{playerName:a,direction:s[e]},{headers:{token:n}});case 25:u=o.sent,200===u.data.code?(f=u.data.data,t.visitedDirection.push(e),t.currentRoomId=f.roomID,t.dialogContent="往".concat(t.getDirectionText(e),"走，你来到了").concat(f.roomName,"。 ").concat(f.description)):4===s[e]?t.dialogContent="你停留在原地，你现在在".concat(r[t.currentRoomId],"。"):t.dialogContent="无法往".concat(t.getDirectionText(e),"走，你现在在").concat(r[t.currentRoomId],"。");case 27:o.next=32;break;case 29:o.prev=29,o.t0=o["catch"](9),console.error("请求出错:",o.t0);case 32:t.displayedText="",t.startTextAnimation();case 34:case"end":return o.stop()}}),o,null,[[9,29]])})))()},startTextAnimation:function(){var e=this,t=0,o=function o(){t<e.dialogContent.length?(e.displayedText+=e.dialogContent[t++],e.displayTimeout=setTimeout(o,50)):e.displayTimeout=null};o()},getDirectionText:function(e){var t={east:"东",south:"南",west:"西",north:"北"};return t[e]},exitGame:function(){this.showExitDialog=!0},confirmExit:function(){localStorage.removeItem("playerName"),localStorage.removeItem("token"),this.$router.push("/login-main")}},beforeDestroy:function(){this.displayTimeout&&(clearTimeout(this.displayTimeout),this.displayTimeout=null)}},G=F;var B=(0,x.A)(G,a,n,!1,null,"86cd2164",null);const H=B.exports},26263:(e,t,o)=>{e.exports=o.p+"img/Zoo.9f838bc7.png"},81810:(e,t,o)=>{e.exports=o.p+"img/npc.b6cbf61e.jpg"},1061:(e,t,o)=>{e.exports=o.p+"img/zooMap.e4268453.jpg"}}]);
//# sourceMappingURL=873.7942c0f6.js.map