"use strict";(self["webpackChunkwebwork"]=self["webpackChunkwebwork"]||[]).push([[786],{8786:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"money-manage"},[t("h1",[e._v("我的余额："+e._s(e.balance))]),t("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"金额",prop:"amount"}},[t("el-input",{attrs:{placeholder:"请输入金额"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",e._n(t))},expression:"form.amount"}})],1),t("el-form-item",{attrs:{label:"操作"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.deposit}},[e._v("充值")]),t("el-button",{attrs:{type:"danger"},on:{click:e.consume}},[e._v("消费")])],1)],1)],1)},o=[],r=a(8355),n={data(){return{balance:0,form:{amount:null}}},mounted(){this.fetchBalance()},methods:{fetchBalance(){const e=localStorage.getItem("userId");r.A.get(`http://localhost:8080/user/${e}`).then((e=>{const{money:t}=e.data.data;this.balance=t})).catch((e=>{console.error("Error fetching user data:",e)}))},deposit(){this.updateBalance("deposit")},consume(){this.updateBalance("consume")},updateBalance(e){const t=parseFloat(this.form.amount);if(!isNaN(t)&&t>0){const a=localStorage.getItem("userId");r.A.put(`http://localhost:8080/updateBalance/${a}`,{amount:t,action:e}).then((t=>{const a=t.data;this.resetForm(),"deposit"===e?this.$message.success("充值成功"):"余额不足"===a?this.$message.error("余额不足！"):this.$message.success("消费成功"),this.fetchBalance()})).catch((e=>{console.error("Error updating balance:",e),this.$message.error("操作失败，请重试")}))}else this.$message.error("请输入有效的金额")},resetForm(){this.$refs.form.resetFields()}}},l=n,c=a(1656),u=(0,c.A)(l,s,o,!1,null,"c99837bc",null),m=u.exports}}]);
//# sourceMappingURL=786.06d98284.js.map