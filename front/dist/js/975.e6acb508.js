"use strict";(self["webpackChunkwebwork"]=self["webpackChunkwebwork"]||[]).push([[975],{5975:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"regist-main"},[t("el-container",[t("el-main",[t("div",{staticClass:"container"},[t("div",{staticClass:"login-form"},[t("h3",[e._v("注册")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[t("div",{staticClass:"changeDisplay border2"},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("el-input",{attrs:{type:"email",placeholder:"电子邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t("el-date-picker",{attrs:{placeholder:"日期","picker-options":e.pickerOptions},model:{value:e.birthdate,callback:function(t){e.birthdate=t},expression:"birthdate"}})],1),t("div",{staticClass:"changeDisplay border3"},[t("div",{staticClass:"textUse"},[t("h6",{staticClass:"hStyle"},[e._v("请上传图像")])]),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8080/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.handleAvatarError}},[e.url?t("img",{staticClass:"avatar",attrs:{src:e.url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("div",{staticClass:"reRegist"}),t("div",{staticClass:"clear"}),t("div",{staticClass:"register"},[t("div",[t("button",{staticClass:"useButton",attrs:{type:"submit"}},[e._v("注册")])]),t("div",[t("router-link",{staticClass:"regist",attrs:{to:"/"}},[e._v("返回登录界面")])],1)])])])])])],1)],1)},r=[],i=(s(4114),s(4603),s(7566),s(8721),s(8355)),l={data(){return{url:"",imgID:"",username:"",password:"",email:"",birthdate:"",pickerOptions:{disabledDate(e){return e.getTime()>Date.now()}}}},mounted(){document.body.classList.add("loginBac")},destroyed(){document.body.classList.remove("loginBac")},methods:{validateEmail(e){const t=/\S+@\S+\.\S+/;return t.test(e)},validatePhoneNumber(e){const t=/^\d{11}$/;return t.test(e)},handleAvatarSuccess(e,t){console.log(t),this.url=URL.createObjectURL(t.raw),0===e.code?(this.$message.success(e.msg),this.imgID=e.imgID):this.$message.error(e.msg)},handleAvatarError(e){this.$message.error(e)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},register(){if(!this.validateEmail(this.email))return void this.$message.error("请输入有效的邮箱地址！");if(this.password.length<5||this.password.length>8)return void this.$message.error("密码长度必须在5-8位之间！");const e=this.formatDate(this.birthdate);i.A.post("http://localhost:8080/register",{name:this.username,password:this.password,email:this.email,time:e,url:this.imgID}).then((e=>{400===e.data.code||401===e.data.code||500===e.data.code?this.$message.error(e.data.msg):(this.$message.success(e.data.msg),this.$router.push("/login-main"))})).catch((e=>{this.$message.error(e.response.data.msg)}))},formatDate(e){const t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=a<10?"0"+a:a,l=r<10?"0"+r:r;return`${s}-${i}-${l}`}}},o=l,n=s(1656),c=(0,n.A)(o,a,r,!1,null,"415aedf1",null),d=c.exports}}]);
//# sourceMappingURL=975.e6acb508.js.map